(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function M(){if(typeof window>"u"||typeof document>"u")return()=>{};const e=window._SVG_SPRITE_IDS_=window._SVG_SPRITE_IDS_||[],t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="absolute",t.style.width="0",t.style.height="0";function r(){document.body.insertBefore(t,document.body.firstChild)}return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r(),function(s,i){(e.indexOf(i)>-1||document.getElementById(i))&&console.warn(`Icon #${i} was duplicately registered. It must be globally unique.`),e.push(i),t.insertAdjacentHTML("beforeend",s)}}const d=M();d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17" id="icon-user"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 14.5v-1.333c0-.708-.29-1.386-.806-1.886a2.8 2.8 0 0 0-1.944-.781h-5.5c-.73 0-1.429.281-1.945.781A2.63 2.63 0 0 0 3 13.167V14.5M8.5 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5" /></symbol>',"icon-user");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 34 34" id="icon-download"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M26 19v4a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-4M12 14l5 5 5-5M17 19V7" /></symbol>',"icon-download");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 38 38" id="icon-arrow-right"><rect width="38" height="38" rx="19" /><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.327 18.606h15.346M19 10.934l7.673 7.673L19 26.28" /></symbol>',"icon-arrow-right");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 34 34" id="icon-copy"><path stroke="currentColor" stroke-width="2" d="M21.25 4.25h-8.5a5.667 5.667 0 0 0-5.667 5.667V21.25" /><path stroke="currentColor" stroke-width="2" d="M12.333 16.292c0-1.685.002-2.865.104-3.77.1-.884.284-1.381.568-1.75q.26-.34.6-.6c.369-.284.866-.469 1.75-.569.905-.102 2.085-.103 3.77-.103 1.684 0 2.864.001 3.769.103.885.1 1.382.285 1.75.569q.34.26.6.6c.284.369.47.866.569 1.75.102.905.103 2.085.103 3.77v5.666c0 1.685-.001 2.865-.103 3.77-.1.884-.285 1.381-.568 1.75a3.3 3.3 0 0 1-.6.6c-.37.284-.866.469-1.751.569-.905.102-2.085.103-3.77.103-1.684 0-2.864-.002-3.769-.104-.884-.1-1.381-.284-1.75-.568a3.3 3.3 0 0 1-.6-.6c-.284-.369-.469-.866-.569-1.75-.101-.905-.103-2.085-.103-3.77z" /></symbol>',"icon-copy");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 25 25" id="icon-check"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 5 8.688 16 4 11" /></symbol>',"icon-check");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 8" id="icon-tick"><path stroke="currentColor" stroke-width="2" d="m1 4 2.555 2.874a.15.15 0 0 0 .224 0L9 1" /></symbol>',"icon-tick");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="icon-search"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.167 15.833a6.667 6.667 0 1 0 0-13.333 6.667 6.667 0 0 0 0 13.333M17.5 17.5l-3.625-3.625" /></symbol>',"icon-search");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 12" id="icon-chevron-up"><g clip-path="url(#clip0_110_1442)"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m1 7.5 6-6 6 6" /></g></symbol>',"icon-chevron-up");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 12" id="icon-chevron-down"><g clip-path="url(#clip0_175_8656)"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m1 4.5 6 6 6-6" /></g></symbol>',"icon-chevron-down");d('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 178 84" id="icon-logo"><path fill="#fff" d="M11.351 40h-8.08V13.818h8.438q3.81 0 6.52 1.573 2.71 1.56 4.155 4.487 1.444 2.915 1.444 6.98 0 4.09-1.457 7.044-1.457 2.94-4.244 4.526Q15.34 40 11.35 40m-4.909-2.812h4.705q3.246 0 5.382-1.253 2.135-1.254 3.183-3.567 1.048-2.315 1.048-5.51 0-3.17-1.035-5.459-1.036-2.301-3.094-3.528-2.058-1.24-5.126-1.24H6.442zm23.425-23.37h3.784l8.897 21.733h.307l8.898-21.733h3.784V40h-2.966V20.108h-.256L44.134 40H41.27l-8.182-19.892h-.255V40h-2.966zm33.82 0 7.773 22.04h.307l7.773-22.04h3.324L73.25 40h-3.272l-9.614-26.182zm44.736 0V40h-3.068L91.088 19.443h-.255V40h-3.171V13.818h3.068l14.318 20.608h.256V13.818z" /><path fill="url(#icon-logo_a)" d="M125.872 40v-2.301l8.642-9.46a60 60 0 0 0 2.506-2.89q.984-1.24 1.457-2.326a5.6 5.6 0 0 0 .486-2.301q0-1.38-.665-2.391a4.3 4.3 0 0 0-1.789-1.56q-1.138-.55-2.557-.55-1.509 0-2.634.627a4.3 4.3 0 0 0-1.726 1.726q-.6 1.111-.6 2.608h-3.017q0-2.3 1.061-4.04a7.37 7.37 0 0 1 2.889-2.71q1.841-.972 4.129-.972 2.302 0 4.078.972 1.778.971 2.787 2.62 1.01 1.65 1.01 3.67 0 1.444-.524 2.825-.512 1.368-1.79 3.055-1.265 1.675-3.515 4.091l-5.881 6.29v.205h12.17V40zm24.767.205a2.21 2.21 0 0 1-1.623-.678 2.21 2.21 0 0 1-.678-1.624q0-.946.678-1.623a2.21 2.21 0 0 1 1.623-.678q.946 0 1.624.678.677.677.677 1.623 0 .627-.319 1.151-.308.524-.831.844a2.2 2.2 0 0 1-1.151.306m16.01.153q-2.89 0-4.922-1.572-2.033-1.586-3.107-4.59-1.073-3.017-1.073-7.287 0-4.245 1.073-7.248 1.087-3.018 3.12-4.603 2.045-1.598 4.909-1.598t4.896 1.598q2.046 1.585 3.12 4.602 1.086 3.005 1.086 7.25 0 4.27-1.074 7.286-1.074 3.005-3.106 4.59-2.033 1.572-4.922 1.572m0-2.812q2.863 0 4.449-2.762 1.585-2.76 1.585-7.875 0-3.4-.729-5.791-.715-2.39-2.071-3.644-1.343-1.252-3.234-1.252-2.838 0-4.436 2.8-1.599 2.786-1.598 7.887 0 3.4.716 5.779.715 2.377 2.058 3.617 1.355 1.24 3.26 1.24" /><path fill="url(#icon-logo_b)" d="M16.937 62.67V77h-1.7V66.47q0-.21.01-.45l.04-.49-4.92 8.96q-.23.45-.7.45h-.28q-.47 0-.7-.45l-5.02-9q.06.53.06.98V77h-1.7V62.67h1.43q.26 0 .4.05t.27.28l4.95 8.82q.12.24.23.5.12.26.22.53.1-.27.21-.53.111-.27.24-.51l4.86-8.81q.12-.23.26-.28.15-.05.41-.05zm14.505 12.75-.01 1.58h-8.83V62.67h8.83v1.58h-6.89v4.76h5.58v1.52h-5.58v4.89zM47.075 77h-1.92a.52.52 0 0 1-.35-.11 1.2 1.2 0 0 1-.2-.26l-3.84-6.02q-.081.24-.18.41l-3.74 5.61q-.1.14-.22.26a.42.42 0 0 1-.31.11h-1.8l4.93-7.36-4.73-6.97h1.93q.21 0 .31.07a.7.7 0 0 1 .18.2l3.74 5.74q.069-.21.21-.46l3.53-5.24a.7.7 0 0 1 .19-.22q.11-.09.26-.09h1.85l-4.75 6.88zm18.968-14.33V77h-1.7V66.47q0-.21.01-.45l.04-.49-4.92 8.96q-.23.45-.7.45h-.28q-.47 0-.7-.45l-5.02-9q.06.53.06.98V77h-1.7V62.67h1.43q.26 0 .4.05t.27.28l4.95 8.82q.12.24.23.5.12.26.22.53.099-.27.21-.53.11-.27.24-.51l4.86-8.81q.12-.23.26-.28.15-.05.41-.05zm13.254 9.01-2.25-5.83a12 12 0 0 1-.42-1.34q-.21.81-.43 1.35l-2.25 5.82zm4.04 5.32h-1.5a.65.65 0 0 1-.42-.13.8.8 0 0 1-.24-.33l-1.34-3.46h-6.43l-1.34 3.46a.7.7 0 0 1-.23.32.65.65 0 0 1-.43.14h-1.49l5.73-14.33h1.96zm12.17-12.7h-4.64V77h-1.93V64.3h-4.65v-1.63h11.22z" /><defs><linearGradient id="icon-logo_a" x1="0" x2="30.003" y1="0" y2="98.898" gradientUnits="userSpaceOnUse"><stop stop-color="#43CBFF" /><stop offset="1" stop-color="#9708CC" /></linearGradient><linearGradient id="icon-logo_b" x1="-26.838" x2="-15.251" y1="25.552" y2="101.32" gradientUnits="userSpaceOnUse"><stop stop-color="#43CBFF" /><stop offset="1" stop-color="#9708CC" /></linearGradient></defs></symbol>',"icon-logo");class w{static _instance;subject;semester;teacher;category;search;constructor(){if(w._instance)return w._instance;this.subject=new Set,this.semester=new Set,this.teacher=new Set,this.category=new Set,this.search="",w._instance=this}getFilterArrByKey(t){if(!this[t])return[];const r=[];for(let n of this[t])r.push(n);return r}toggleFilterValue(t,r){this[t]&&(this[t].has(r)?this[t].delete(r):this[t].add(r))}setSearchValue(t){this.search=t}}const l=new w;var $=/\{[^{}]+\}/g,v=({allowReserved:e,name:t,value:r})=>{if(r==null)return"";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?r:encodeURIComponent(r)}`},P=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},F=e=>{switch(e){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},U=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},O=({allowReserved:e,explode:t,name:r,style:n,value:s})=>{if(!t){let a=(e?s:s.map(c=>encodeURIComponent(c))).join(F(n));switch(n){case"label":return`.${a}`;case"matrix":return`;${r}=${a}`;case"simple":return a;default:return`${r}=${a}`}}let i=P(n),o=s.map(a=>n==="label"||n==="simple"?e?a:encodeURIComponent(a):v({allowReserved:e,name:r,value:a})).join(i);return n==="label"||n==="matrix"?i+o:o},z=({allowReserved:e,explode:t,name:r,style:n,value:s})=>{if(s instanceof Date)return`${r}=${s.toISOString()}`;if(n!=="deepObject"&&!t){let a=[];Object.entries(s).forEach(([p,h])=>{a=[...a,p,e?h:encodeURIComponent(h)]});let c=a.join(",");switch(n){case"form":return`${r}=${c}`;case"label":return`.${c}`;case"matrix":return`;${r}=${c}`;default:return c}}let i=U(n),o=Object.entries(s).map(([a,c])=>v({allowReserved:e,name:n==="deepObject"?`${r}[${a}]`:a,value:c})).join(i);return n==="label"||n==="matrix"?i+o:o},N=({path:e,url:t})=>{let r=t,n=t.match($);if(n)for(let s of n){let i=!1,o=s.substring(1,s.length-1),a="simple";o.endsWith("*")&&(i=!0,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),a="label"):o.startsWith(";")&&(o=o.substring(1),a="matrix");let c=e[o];if(c==null)continue;if(Array.isArray(c)){r=r.replace(s,O({explode:i,name:o,style:a,value:c}));continue}if(typeof c=="object"){r=r.replace(s,z({explode:i,name:o,style:a,value:c}));continue}if(a==="matrix"){r=r.replace(s,`;${v({name:o,value:c})}`);continue}let p=encodeURIComponent(a==="label"?`.${c}`:c);r=r.replace(s,p)}return r},L=({allowReserved:e,array:t,object:r}={})=>n=>{let s=[];if(n&&typeof n=="object")for(let i in n){let o=n[i];if(o!=null){if(Array.isArray(o)){s=[...s,O({allowReserved:e,explode:!0,name:i,style:"form",value:o,...t})];continue}if(typeof o=="object"){s=[...s,z({allowReserved:e,explode:!0,name:i,style:"deepObject",value:o,...r})];continue}s=[...s,v({allowReserved:e,name:i,value:o})]}}return s.join("&")},G=e=>{if(e){if(e.startsWith("application/json")||e.endsWith("+json"))return"json";if(e==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(t=>e.startsWith(t)))return"blob";if(e.startsWith("text/"))return"text"}},H=({baseUrl:e,path:t,query:r,querySerializer:n,url:s})=>{let i=s.startsWith("/")?s:`/${s}`,o=e+i;t&&(o=N({path:t,url:o}));let a=r?n(r):"";return a.startsWith("?")&&(a=a.substring(1)),a&&(o+=`?${a}`),o},k=(e,t)=>{let r={...e,...t};return r.baseUrl?.endsWith("/")&&(r.baseUrl=r.baseUrl.substring(0,r.baseUrl.length-1)),r.headers=T(e.headers,t.headers),r},T=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[s,i]of n)if(i===null)t.delete(s);else if(Array.isArray(i))for(let o of i)t.append(s,o);else i!==void 0&&t.set(s,typeof i=="object"?JSON.stringify(i):i)}return t},q=class{_fns;constructor(){this._fns=[]}clear(){this._fns=[]}exists(e){return this._fns.indexOf(e)!==-1}eject(e){let t=this._fns.indexOf(e);t!==-1&&(this._fns=[...this._fns.slice(0,t),...this._fns.slice(t+1)])}use(e){this._fns=[...this._fns,e]}},W=()=>({error:new q,request:new q,response:new q}),K={bodySerializer:e=>JSON.stringify(e)},J=L({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),Q={"Content-Type":"application/json"},D=(e={})=>({...K,baseUrl:"",fetch:globalThis.fetch,headers:Q,parseAs:"auto",querySerializer:J,...e}),I=(e={})=>{let t=k(D(),e),r=()=>({...t}),n=o=>(t=k(t,o),r()),s=W(),i=async o=>{let a={...t,...o,headers:T(t.headers,o.headers)};a.body&&a.bodySerializer&&(a.body=a.bodySerializer(a.body)),a.body||a.headers.delete("Content-Type");let c=H({baseUrl:a.baseUrl??"",path:a.path,query:a.query,querySerializer:typeof a.querySerializer=="function"?a.querySerializer:L(a.querySerializer),url:a.url}),p={redirect:"follow",...a},h=new Request(c,p);for(let f of s.request._fns)h=await f(h,a);let B=a.fetch,u=await B(h);for(let f of s.response._fns)u=await f(u,h,a);let g={request:h,response:u};if(u.ok){if(u.status===204||u.headers.get("Content-Length")==="0")return{data:{},...g};if(a.parseAs==="stream")return{data:u.body,...g};let f=(a.parseAs==="auto"?G(u.headers.get("Content-Type")):a.parseAs)??"json",x=await u[f]();return f==="json"&&a.responseTransformer&&(x=await a.responseTransformer(x)),{data:x,...g}}let b=await u.text();try{b=JSON.parse(b)}catch{}let y=b;for(let f of s.error._fns)y=await f(b,u,h,a);if(y=y||{},a.throwOnError)throw y;return{error:y,...g}};return{connect:o=>i({...o,method:"CONNECT"}),delete:o=>i({...o,method:"DELETE"}),get:o=>i({...o,method:"GET"}),getConfig:r,head:o=>i({...o,method:"HEAD"}),interceptors:s,options:o=>i({...o,method:"OPTIONS"}),patch:o=>i({...o,method:"PATCH"}),post:o=>i({...o,method:"POST"}),put:o=>i({...o,method:"PUT"}),request:i,setConfig:n,trace:o=>i({...o,method:"TRACE"})}};const S=I({baseUrl:"http://212.109.195.78:8080/"});S.interceptors.response.use(e=>(e.status===200&&console.log(`request to ${e.url} was successful`),e));const R=I(D()),X=e=>(e?.client??R).get({...e,url:"/resources"}),Y=e=>(e?.client??R).get({...e,url:"/search"}),Z=async()=>{const e={subjectArray:l.subject.size?l.getFilterArrByKey("subject").join(","):"",semesterArray:l.semester.size?l.getFilterArrByKey("semester").join(","):"",teacherArray:l.teacher.size?l.getFilterArrByKey("teacher").join(","):"",subjectTypeArray:l.category.size?l.getFilterArrByKey("category").join(","):""};console.info(e);const{data:t}=await X({client:S,query:{...e}});return t.map(n=>({file:n.name,discipline:n.subject_name,type:n.category_name,year:n.year,author:n.teacher_name,download:n.is_file}))},_=async()=>{console.log(l.search);const e={subjectArray:l.subject.size?l.getFilterArrByKey("subject").join(","):"",semesterArray:l.semester.size?l.getFilterArrByKey("semester").join(","):"",teacherArray:l.teacher.size?l.getFilterArrByKey("teacher").join(","):"",subjectTypeArray:l.category.size?l.getFilterArrByKey("category").join(","):""},{data:t}=await Y({client:S,query:{prompt:l.search,...e}});return console.log(t),t.map(n=>({file:n.name,discipline:n.subject_name,type:n.category_name,year:n.year,author:n.teacher_name,download:n.is_file}))},j=document.querySelector("#documentContainer");let E=await Z();const ee=async()=>{try{let e;const t={filterOptions:["contains"],debounceMs:200,maxNumConditions:1},n={rowData:E,columnDefs:[{field:"file",flex:4,checkboxSelection:!0,filter:!0,filterParams:t},{field:"discipline",flex:2,filter:!0,filterParams:t},{field:"type",flex:2,filter:!0,filterParams:t},{field:"year",flex:1,filter:"agNumberColumnFilter",filterParams:{filterOptions:["equals"],debounceMs:200,maxNumConditions:1}},{field:"author",flex:2,filter:!0,filterParams:t,cellRenderer:function(){return`
                                <svg class="ag-theme-msu__user-img">
                                    <use xlink:href="#icon-user"></use>
                                </svg>
                                <span>Половинко А.С.</span>
                        `}},{field:"download",flex:1,cellRenderer:function(){return`
                            <button class="ag-theme-msu__btn-download">  
                                <svg class="ag-theme-msu__download-img">
                                    <use xlink:href="#icon-download"></use>
                                </svg>
                            </button>
                        `}}],rowHeight:68,rowSelection:"multiple"};return{init:s=>{e=agGrid.createGrid(s,n)},update:s=>{e.setGridOption("rowData",s)}}}catch{return console.log("getAllDocumentsToTable request is failed"),{error:"Error: getAllDocument is failed"}}},m=await ee(),fe=async()=>{m.init?m.init(j):j.innerHTML=m.error},A=(e=E)=>{m.update?m.update(e):j.innerHTML=m.error},te=document.querySelector("#documentSearch"),re=document.querySelector("#documentSearchInput");te.addEventListener("submit",oe);re.addEventListener("input",se);let C;async function oe(e){e.preventDefault();const t=Object.fromEntries(new FormData(e.target));l.setSearchValue(t.search);const r=await _();await A(r)}async function se(e){const t=e.target.value.trim();if(!t&&t!==C){l.setSearchValue("");const r=await _();await A(r)}C=e.target.value.trim()}const V={toggleList:ie,searchInput:le,checkItem:de};function ne(e){e.stopPropagation();const t=e.target.dataset.filter||e.target.closest("[data-filter]").dataset.filter,r=e.target.closest('[data-filter="item"]');if(t&&V[t]&&e.target.getAttribute("type")!=="checkbox"){const n=e.target.dataset.filterValue||e.target.closest("[data-filter]").dataset.filterValue;V[t].call(null,r,n)}}function ae(e,t){const r=t.querySelectorAll("[data-filter-value]"),n=e.value.trim().toLowerCase();ce(r),n&&ue(r,n)}function ie(e){e.classList.toggle("--open"),e.classList.toggle("--visible")}function le(e){e.addEventListener("input",t=>{ae(t.target,e)})}function ce(e){e.forEach(t=>{t.classList.remove("--hidden")})}function ue(e,t){e.forEach(r=>{r.dataset.filterValue.includes(t)||r.classList.add("--hidden")})}async function de(e,t){const r=e.dataset.filterGroup;l.toggleFilterValue(r,t);const n=await _();await A(n)}const he=document.querySelector("#sidebar");he.addEventListener("click",ne,!1);export{fe as d};
